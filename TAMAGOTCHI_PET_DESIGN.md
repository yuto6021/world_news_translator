# たまごっち風ペット育成システム – 完全設計書

## コンセプト
デジモン・ドラクエモンスターズ・たまごっちの要素を融合した、ニュースアプリ連動型育成ゲーム。

### 3大ゲーム要素の統合
| ゲーム | 採用要素 | 実装内容 |
|--------|---------|---------|
| **たまごっち** | 世話システム | 餌やり・遊び・清掃・病気治療（放置ペナルティ） |
| **デジモン** | 進化システム | 育成方針による分岐進化（20種類以上） |
| **ドラクエモンスターズ** | 配合・対戦 | 2体配合で新種誕生、スキル継承、対戦モード |

---

## 1. 生命サイクル（たまごっち式）

### 成長段階
```
たまご(0日) → 幼年期(1-2日) → 成長期(3-5日) → 成熟期(6-10日) → 究極体(11日-)
                                                    ↓
                                            (寿命: 最大30日)
                                                    ↓
                                            　死亡 / 輪廻転生
```

### 1日の生活サイクル
```
06:00  起床（お腹空腹ゲージ-10、機嫌ゲージ-5）
08:00  朝ご飯タイム（催促通知）
12:00  お昼ご飯タイム（催促通知）
15:00  おやつ要求（ランダム）
18:00  夕ご飯タイム（催促通知）
20:00  お風呂要求（汚れゲージ50以上で通知）
22:00  就寝（ライト消灯、寝ている姿に変化）
```

### 4つのステータスゲージ（0-100）
1. **お腹ゲージ** 🍖
   - 3時間で-10ずつ減少
   - 0になると病気リスク+30%/時
   - 餌やりで+30（1日3回推奨）

2. **機嫌ゲージ** 😊
   - 放置で-5/時
   - 遊びで+20（1日3回まで）
   - ゲームプレイで+10
   - 怒りマーク表示時は-20/時（急速悪化）

3. **汚れゲージ** 💩
   - 食事後+15、時間経過+5/時
   - 50超えで機嫌-10/時
   - 清掃で0にリセット（1回1分アニメーション）

4. **体力ゲージ** ❤️
   - 運動・遊びで-10
   - 睡眠中+5/時
   - 0になると動けなくなる（睡眠強制）

### 病気システム
**発症条件**:
- お腹ゲージ0が3時間継続 → 風邪（確率50%）
- 汚れゲージ80超過が6時間 → 腹痛（確率70%）
- 体力ゲージ0が1時間 → 過労（確率30%）

**症状**:
- 画面に病気アイコン表示（💊）
- すべての行動で機嫌-5追加
- 放置すると12時間後に死亡

**治療**:
- 薬を使用（ショップで50pt）
- 治療後3時間は安静（遊び不可）

### 死亡と輪廻転生
**死亡条件**:
- 病気放置12時間
- お腹ゲージ0が24時間継続
- 寿命（30日）到達

**死亡時の救済措置**:
- **輪廻チケット**（500pt）使用で即座に復活
- 未使用の場合は墓標画面 → 24時間後に新しいたまご入手
- 死亡したペットは「思い出アルバム」に記録（写真・ステータス・思い出エピソード）

---

## 2. 分岐進化システム（デジモン式）

### 進化ツリー（全25種類）
```
                        たまご🥚
                           ↓
                    ───────────────
                    ↓             ↓
              パピモン（元気）  プチモン（おとなしい）
                    ↓             ↓
        ────────────────  ────────────────
        ↓           ↓           ↓           ↓
    グレイモン   ガルルモン   エンジェモン  デビモン
    (戦士)      (獣)       (聖)        (闇)
```

### 進化条件（成長期→成熟期の例）
| 進化先 | 条件1 | 条件2 | 条件3 |
|--------|-------|-------|-------|
| **グレイモン** | ビジネス記事30本 | 体力60以上 | バトル5勝 |
| **ガルルモン** | スポーツ記事30本 | 機嫌80以上 | お散歩100回 |
| **エンジェモン** | 国際政治記事30本 | 病気0回 | 清掃回数50 |
| **デビモン** | 放置時間24h以上 | 病気3回経験 | 機嫌20以下 |

### 究極進化（レベル70+特殊条件）
- **ウォーグレイモン**: グレイモン + 親密度100 + 対戦50勝
- **メタルガルルモン**: ガルルモン + 全ジャンル記事50本 + お散歩500回
- **セラフィモン**: エンジェモン + 病気治療10回 + 実績コンプ率50%
- **デーモン**: デビモン + 病気放置3回 + 闇の欠片×10（レアアイテム）

### 進化演出
- 進化開始ボタン → 全画面白フラッシュ → シルエット変化アニメーション（2秒）
- BGM: 専用進化曲（8bit風）
- キャンセル不可、進化後は新しい技習得

---

## 3. 配合システム（ドラクエモンスターズ式）

### 配合の基本ルール
1. **条件**: 成熟期以上のペット2体が必要
2. **結果**: 新しいたまごが生成（親ペットは消滅しない）
3. **配合回数**: 無制限だが、1回につき1000pt消費
4. **孵化時間**: 24時間（リアルタイム）、または広告視聴で短縮（-6時間）

### 配合パターン例
| 親A | 親B | 子供 | 継承スキル |
|-----|-----|------|-----------|
| グレイモン | ガルルモン | オメガモン | 「勇気の盾」+「友情の絆」 |
| エンジェモン | デビモン | ルーチェモン | 「光と闇」（超レア） |
| メタルガルルモン | エンジェモン | セイバーレオモン | 「神速の牙」 |

### スキル継承システム
- 各ペットは最大3つのスキル枠
- 配合時に親のスキルから2つ選択可能
- 稀にランダムで新スキル覚醒（確率5%）

---

## 4. スキル＆バトルシステム

### スキル種類（40種以上）
#### 成長支援系
- **高速学習**: 記事閲覧時の経験値+50%
- **大食い**: 餌やり1回で満腹度+50（通常+30）
- **清潔好き**: 汚れゲージ蓄積速度-50%
- **夜更かし**: 22時以降も活動可能

#### バトル系
- **火炎放射**: 敵に30ダメージ
- **アイスブレス**: 敵に25ダメージ+1ターン行動不能
- **聖なる光**: 自HP30回復
- **暗黒の呪い**: 敵の攻撃力-20%（3ターン）

#### 生産系
- **ポイント錬金**: 1日1回、100pt自動獲得
- **ガチャ運UP**: レア排出率+10%
- **翻訳マスター**: 翻訳精度+30%（体感）

### バトルモード
#### PvE（ストーリーバトル）
- 10ステージ × 3難易度 = 30バトル
- クリア報酬: ポイント、スキル本、配合素材

#### PvP（対戦）
- リアルタイム対戦（マッチング式）
- ランキング: ブロンズ → シルバー → ゴールド → プラチナ → レジェンド
- シーズン制（1ヶ月）、上位報酬: 限定ペットたまご

#### バトルルール
- ターン制（1ターン30秒）
- HP・攻撃・防御・素早さの4ステータス
- スキル使用にはSP（スキルポイント）消費
- 3回勝利で1セット、BO3形式

---

## 5. アイテムシステム

### 消耗品（ショップ購入）
| アイテム | 価格 | 効果 |
|---------|------|------|
| **特製エサ** | 20pt | お腹+50、機嫌+10 |
| **おもちゃ** | 30pt | 機嫌+30、親密度+5 |
| **バスセット** | 15pt | 汚れ0、機嫌+15 |
| **元気ドリンク** | 50pt | 体力全回復 |
| **特効薬** | 50pt | 病気即治療 |
| **輪廻チケット** | 500pt | 死亡復活（1回限り） |
| **進化キャンディ** | 300pt | 経験値+500 |
| **配合チケット** | 1000pt | 配合1回分 |

### レアアイテム（ガチャ・イベント限定）
- **闇の欠片**: デビモン系進化素材
- **虹の羽**: 任意の進化先を選択可能
- **スキル本**: 特定スキルを強制習得
- **時短カプセル**: 配合孵化時間-12時間
- **幸運のお守り**: バトル勝率+10%（5戦）

---

## 6. ミニゲーム（1日3回まで無料）

### 1) 記憶力ゲーム
- 神経衰弱形式
- 制限時間60秒、ペアマッチ数で報酬
- 報酬: 機嫌+10、ポイント10-50

### 2) 反射神経ゲーム
- タイミングよくボタンタップ
- Perfect/Good/Miss判定
- 報酬: 体力+5、ポイント20-100

### 3) クイズゲーム
- 過去に読んだ記事から出題
- 3問連続正解で特別報酬
- 報酬: 経験値+50、ポイント30-80

---

## 7. 世話画面UI設計

### メイン画面レイアウト
```
┌─────────────────────────┐
│  ☀️ 15:30  📊レベル45    │  ← ステータスバー
├─────────────────────────┤
│  ❤️████████ 80/100      │
│  🍖████████ 60/100      │  ← 4ゲージ表示
│  😊██████░░ 75/100      │
│  💩███░░░░░ 35/100      │
├─────────────────────────┤
│         [ペット]          │
│      グレイモン🔥         │  ← アニメーション領域
│   (歩く・食べる・寝る)     │     (512x512px)
│                         │
├─────────────────────────┤
│ [🍖餌] [🎮遊] [🧹掃] [💊薬] │  ← アクション4ボタン
├─────────────────────────┤
│ ステータス | 図鑑 | 対戦   │  ← サブメニュー
└─────────────────────────┘
```

### ペットアニメーション状態
1. **待機**: 左右にゆっくり揺れる（2秒周期）
2. **歩行**: 画面端から端へ移動（10秒）
3. **食事**: 口をパクパク（3秒）
4. **遊び**: ジャンプ×3回（5秒）
5. **睡眠**: 目を閉じてZZZ表示（22:00-06:00）
6. **病気**: 顔色が悪い、ふらふら動作
7. **怒り**: 怒りマーク💢、背景赤点滅
8. **喜び**: ハート💕エフェクト、回転

---

## 8. 通知システム

### プッシュ通知タイミング
| 時刻 | 内容 | 条件 |
|------|------|------|
| 08:00 | おはよう！朝ご飯の時間だよ🍞 | お腹<50 |
| 12:00 | お昼ご飯食べさせて！🍱 | お腹<30 |
| 18:00 | 夕ご飯まだ？お腹ペコペコ🍖 | お腹<20 |
| 20:00 | 汚れてるよ、お風呂入れて🛁 | 汚れ>50 |
| 22:00 | もう寝る時間！おやすみ🌙 | 毎日 |
| 不定期 | 遊んでほしいな〜🎮 | 機嫌<40 |
| 緊急 | 病気になっちゃった！💊 | 病気発症時 |

### アプリ内通知
- 進化可能時: 画面上部に虹色バナー
- スキル習得: ポップアップ+効果音
- 配合完了: たまご孵化演出
- 対戦マッチング: バイブレーション

---

## 9. 画像アセット仕様書

### 必要画像一覧

#### A) ペット本体（最優先）
**基本25種 × 4状態 × 8アニメーション = 800枚**

| カテゴリ | ファイル名規則 | サイズ | 備考 |
|---------|--------------|-------|------|
| たまご | `egg_default.png` | 512x512 | 1種類のみ |
| 幼年期 | `baby_{type}_{state}_{anim}.png` | 512x512 | type: genki/shy |
| 成長期 | `child_{type}_{state}_{anim}.png` | 512x512 | type: warrior/beast/angel/demon |
| 成熟期 | `adult_{name}_{state}_{anim}.png` | 512x512 | name: greymon/garurumon等 |
| 究極体 | `ultimate_{name}_{state}_{anim}.png` | 512x512 | name: wargreymon等 |

**state（状態）**:
- `normal`: 通常
- `happy`: 喜び
- `sick`: 病気
- `angry`: 怒り

**anim（アニメーション）**:
- `idle`: 待機
- `walk`: 歩行
- `eat`: 食事
- `play`: 遊び
- `sleep`: 睡眠
- `clean`: 清掃中
- `battle`: バトル待機
- `attack`: 攻撃モーション

**例**:
- `adult_greymon_normal_idle.png`（グレイモン通常待機）
- `ultimate_wargreymon_happy_attack.png`（ウォーグレイモン喜び攻撃）

#### B) UI部品（高優先度）
| 用途 | ファイル名 | サイズ | 形式 |
|------|-----------|-------|------|
| ゲージ背景 | `gauge_bg.png` | 400x40 | PNG（角丸） |
| ゲージ前景（赤） | `gauge_hp.png` | 400x40 | PNG（グラデ） |
| ゲージ前景（橙） | `gauge_hunger.png` | 400x40 | PNG（グラデ） |
| ゲージ前景（黄） | `gauge_mood.png` | 400x40 | PNG（グラデ） |
| ゲージ前景（茶） | `gauge_dirty.png` | 400x40 | PNG（グラデ） |
| ボタン（餌） | `btn_feed.png` | 128x128 | PNG（丸） |
| ボタン（遊） | `btn_play.png` | 128x128 | PNG（丸） |
| ボタン（掃） | `btn_clean.png` | 128x128 | PNG（丸） |
| ボタン（薬） | `btn_medicine.png` | 128x128 | PNG（丸） |
| 進化演出背景 | `evolution_bg.png` | 1080x1920 | PNG（光） |
| 進化フラッシュ | `evolution_flash.png` | 1080x1920 | PNG（白） |

#### C) アイテムアイコン（中優先度）
| アイテム | ファイル名 | サイズ |
|---------|-----------|-------|
| 特製エサ | `item_food_premium.png` | 256x256 |
| おもちゃ | `item_toy.png` | 256x256 |
| バスセット | `item_bath.png` | 256x256 |
| 元気ドリンク | `item_energy.png` | 256x256 |
| 特効薬 | `item_medicine.png` | 256x256 |
| 輪廻チケット | `item_revive.png` | 256x256 |
| 進化キャンディ | `item_candy.png` | 256x256 |
| 配合チケット | `item_breed.png` | 256x256 |

#### D) エフェクト（低優先度）
| エフェクト | ファイル名 | サイズ | 枚数 |
|-----------|-----------|-------|------|
| ハート | `effect_heart_{01-05}.png` | 128x128 | 5枚 |
| 怒りマーク | `effect_anger_{01-03}.png` | 128x128 | 3枚 |
| 病気マーク | `effect_sick.png` | 128x128 | 1枚 |
| 睡眠ZZZ | `effect_sleep_{01-03}.png` | 128x128 | 3枚 |
| キラキラ | `effect_sparkle_{01-08}.png` | 256x256 | 8枚 |

#### E) 背景・装飾（最低優先度）
| 用途 | ファイル名 | サイズ |
|------|-----------|-------|
| 世話画面背景（昼） | `bg_room_day.png` | 1080x1920 |
| 世話画面背景（夜） | `bg_room_night.png` | 1080x1920 |
| バトル背景（草原） | `bg_battle_field.png` | 1080x1920 |
| バトル背景（洞窟） | `bg_battle_cave.png` | 1080x1920 |
| 進化ツリー背景 | `bg_evolution_tree.png` | 1080x1920 |

### 画像制作ガイドライン
1. **スタイル**: ドット絵風（16x16基準を拡大）または手描き風
2. **カラー**: 彩度高め、輪郭線2-3px
3. **背景**: 透過PNG必須
4. **フォーマット**: PNG-24（透過あり）
5. **最適化**: TinyPNGで圧縮（目標50KB以下/枚）
6. **命名**: スネークケース、小文字のみ

### フォルダ構成
```
assets/
├── pets/
│   ├── egg/
│   ├── baby/
│   ├── child/
│   ├── adult/
│   └── ultimate/
├── ui/
│   ├── gauges/
│   ├── buttons/
│   └── panels/
├── items/
├── effects/
└── backgrounds/
```

---

## 10. 実装スキーマ

### PetModel（拡張版）
```dart
class PetModel {
  final String id;
  final String name;
  final String species; // "greymon", "garurumon"等
  final String stage; // "egg", "baby", "child", "adult", "ultimate"
  
  // ステータス
  int level;
  int exp;
  int hp;
  int hunger;       // お腹ゲージ
  int mood;         // 機嫌ゲージ
  int dirty;        // 汚れゲージ
  int stamina;      // 体力ゲージ
  int intimacy;     // 親密度
  
  // ジャンル別経験値
  Map<String, int> genreStats; // {"business": 50, "tech": 30, ...}
  
  // 生命サイクル
  DateTime birthDate;
  DateTime lastFed;
  DateTime lastPlayed;
  DateTime lastCleaned;
  int age; // 日数
  bool isAlive;
  bool isSick;
  String? sickness; // "cold", "stomachache", "fatigue"
  
  // スキル
  List<String> skills; // 最大3つ
  
  // バトルステータス
  int attack;
  int defense;
  int speed;
  int wins;
  int losses;
  
  // その他
  int playCount;
  int cleanCount;
  int battleCount;
  Map<String, dynamic> evolutionProgress; // 進化条件進捗
}
```

### PetService（拡張版）
```dart
class PetService {
  // 基本世話
  Future<void> feedPet(String petId, String foodType);
  Future<void> playWithPet(String petId, String gameType);
  Future<void> cleanPet(String petId);
  Future<void> giveMedicine(String petId);
  
  // ゲージ管理
  Future<void> updateGauges(String petId); // 時間経過による自動減少
  Future<bool> checkSickness(String petId); // 病気判定
  Future<void> checkDeath(String petId); // 死亡判定
  
  // 進化
  Future<bool> canEvolve(String petId);
  Future<List<String>> getAvailableEvolutions(String petId);
  Future<void> evolvePet(String petId, String targetSpecies);
  
  // 配合
  Future<String> breedPets(String parentId1, String parentId2);
  Future<void> hatchEgg(String eggId);
  
  // バトル
  Future<BattleResult> startBattle(String petId, String opponentId);
  Future<void> learnSkill(String petId, String skillId);
  
  // 通知
  Future<void> scheduleNotifications(String petId);
  
  // 統計
  Future<Map<String, dynamic>> getPetStats(String petId);
  Future<List<PetModel>> getPetAlbum(); // 思い出アルバム
}
```

---

## 11. 開発優先度

### フェーズ1: コアシステム（2週間）
- [x] PetModel拡張
- [ ] 4ゲージシステム実装
- [ ] 餌やり・遊び・清掃UI
- [ ] 時間経過ロジック（バックグラウンド対応）
- [ ] 病気・死亡システム

### フェーズ2: 進化システム（1週間）
- [ ] 進化ツリーデータベース
- [ ] 進化条件チェック
- [ ] 進化演出アニメーション
- [ ] 基本5種ペット実装

### フェーズ3: バトル＆配合（1週間）
- [ ] スキルシステム
- [ ] PvEバトル（ストーリー10ステージ）
- [ ] 配合ロジック
- [ ] スキル継承

### フェーズ4: ミニゲーム＆通知（3日）
- [ ] 3種ミニゲーム実装
- [ ] プッシュ通知設定
- [ ] デイリーリセット処理

### フェーズ5: PvP＆完成度向上（1週間）
- [ ] マッチングシステム
- [ ] ランキング
- [ ] 思い出アルバム
- [ ] 図鑑コンプ報酬

---

## 12. 計測指標（KPI）

| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| DAU（デイリーアクティブユーザー） | 1000人 | ログイン数 |
| ペット生存率 | 80%以上 | 死亡数/総ペット数 |
| 平均プレイ時間 | 15分/日 | セッション時間 |
| 配合実行率 | 30% | 配合回数/ユーザー数 |
| バトル参加率 | 50% | バトル実行数/DAU |
| 課金率 | 5% | 課金ユーザー/DAU |
| 平均ARPU | ¥300 | 総売上/DAU |
| リテンション（7日） | 40% | 7日後継続率 |
| 進化完了率 | 60% | 究極体到達数/総ペット |

---

## 13. マネタイズ（収益化）

### 課金アイテム
| 商品 | 価格 | 内容 |
|------|------|------|
| ポイントパック小 | ¥120 | 500pt |
| ポイントパック中 | ¥490 | 2500pt（+500pt） |
| ポイントパック大 | ¥980 | 6000pt（+1500pt） |
| VIPパス（月額） | ¥480 | 広告なし+デイリー200pt |
| レアペットガチャ | ¥250 | 限定種確定 |
| 配合チケット×5 | ¥370 | 配合5回分 |
| 輪廻チケット×3 | ¥610 | 復活3回分 |

### 広告収益
- リワード動画: 配合時短（-6時間）、ガチャ1回無料
- バナー広告: ショップ画面下部
- インタースティシャル: バトル終了後（5回に1回）

---

この設計書に基づいて、段階的に実装を進めることで、本格的なやり込み型育成ゲームが完成します。画像アセットは最優先でペット本体800枚の制作を依頼してください。
